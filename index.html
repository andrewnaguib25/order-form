import { useState } from "react";

export default function OrderForm() {
  const snacks = [
    { name: "Cup of Noodles", price: 1.5 },
    { name: "Pop Tarts", price: 1.5 },
    { name: "Oreos", price: 1.5 },
    { name: "Famous Amos", price: 1.5 },
    { name: "Uncrustable", price: 2 },
    { name: "Mac 'N Cheese", price: 2 },
    { name: "Nature Valley Bar", price: 2 },
    { name: "Clif Bar", price: 2 },
    { name: "Fit Crunch Bar", price: 3 },
    { name: "Donuts", price: 3 },
    { name: "Beef Jerky", price: 3 },
    { name: "Chester's Fries", price: 1.75 },
    { name: "Hot Cheetos", price: 1.75 },
    { name: "Frito Lay Variety", price: 1.75 },
    { name: "Pringles", price: 2 },
    { name: "Takis", price: 3 }
  ];

  const candies = [
    "Kit Kat",
    "Twix",
    "Snickers",
    "Reese's",
    "Sour Punch Straws",
    "Skittles",
    "Sour Patch Kids"
  ];

  const drinks = [
    "Water",
    "Sprite",
    "Coke",
    "Diet Coke",
    "Dr. Pepper",
    "Sunkist",
    "Fruit Punch Gatorade",
    "Lemon Lime Gatorade",
    "Starbucks",
    "Fairlife"
  ];

  const [order, setOrder] = useState({});
  const [selectedCandy, setSelectedCandy] = useState("");
  const [selectedDrink, setSelectedDrink] = useState("");
  const [fork, setFork] = useState(false);

  const handleQuantityChange = (snack, quantity) => {
    setOrder((prev) => ({
      ...prev,
      [snack]: quantity > 0 ? quantity : 0,
    }));
  };

  const calculateTotal = () => {
    let total = Object.entries(order).reduce((sum, [snack, quantity]) => {
      const item = snacks.find((s) => s.name === snack);
      return sum + (item ? item.price * quantity : 0);
    }, 0);
    if (selectedCandy) total += 2;
    if (selectedDrink) total += selectedDrink === "Water" ? 1 : 1.75;
    if (fork) total += 0.25;
    return total.toFixed(2);
  };

  return (
    <div className="p-6 max-w-lg mx-auto bg-white rounded-xl shadow-md space-y-4">
      <h1 className="text-xl font-bold">Student Store Order Form</h1>
      <div>
        {snacks.map(({ name }) => (
          <div key={name} className="flex justify-between items-center mb-2">
            <span>{name}</span>
            <input
              type="number"
              min="0"
              className="border p-1 w-16"
              value={order[name] || ""}
              onChange={(e) => handleQuantityChange(name, Number(e.target.value))}
            />
          </div>
        ))}
      </div>
      
      <div>
        <label className="block font-semibold">Candy:</label>
        <select
          className="border p-2 w-full"
          value={selectedCandy}
          onChange={(e) => setSelectedCandy(e.target.value)}
        >
          <option value="">Select a Candy</option>
          {candies.map((candy) => (
            <option key={candy} value={candy}>{candy} - $2</option>
          ))}
        </select>
      </div>

      <div>
        <label className="block font-semibold">Drink:</label>
        <select
          className="border p-2 w-full"
          value={selectedDrink}
          onChange={(e) => setSelectedDrink(e.target.value)}
        >
          <option value="">Select a Drink</option>
          {drinks.map((drink) => (
            <option key={drink} value={drink}>{drink} - {drink === "Water" ? "$1" : "$1.75"}</option>
          ))}
        </select>
      </div>

      <div className="flex items-center">
        <input
          type="checkbox"
          className="mr-2"
          checked={fork}
          onChange={() => setFork(!fork)}
        />
        <span>Add Fork ($0.25)</span>
      </div>

      <h2 className="text-lg font-semibold">Total: ${calculateTotal()}</h2>
      <button className="bg-green-500 text-white p-2 rounded w-full">Submit Order</button>
    </div>
  );
}
