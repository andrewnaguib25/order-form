<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Saint John Bosco Snack Store</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css" />
    <style>
        body {
            background: #00274d; /* Navy Blue */
            color: white;
        }

        .hero {
            background: #00274d; /* Navy */
            color: white;
        }

        .title {
            color: #ffd700; /* Gold */
            text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.5);
        }

        .price {
            font-weight: bold;
            color: #ffd700; /* Gold */
        }

        .container {
            max-width: 800px;
        }

        .message {
            margin: 20px;
            font-weight: bold;
            color: green;
            padding: 8px;
            background-color: beige;
            border-radius: 4px;
            border-color: aquamarine;
        }
    </style>
</head>
<body>
    <section class="hero is-bold">
        <div class="hero-body">
            <div class="container">
                <h1 class="title">Saint John Bosco Snack Store</h1>
                <p>Fill out your details and pick your snacks!</p>
            </div>
        </div>
    </section>

    <form id="form" class="container m-4" method="POST">
        <div class="field">
            <label class="label">Full Name *</label>
            <div class="control">
                <input class="input" type="text" placeholder="Enter your full name" name="Name" required />
            </div>
        </div>

        <div class="field">
            <label class="label">Email *</label>
            <div class="control">
                <input class="input" type="email" placeholder="Enter your email" name="Email" required />
            </div>
        </div>

        <div class="field">
            <label class="label">Student ID *</label>
            <div class="control">
                <input class="input" type="text" placeholder="Enter your ID number" name="Student ID" required />
            </div>
        </div>

        <div class="field">
            <label class="label">Snacks</label>
            <div class="control">
                <div class="select">
                    <select id="snack" name="Snacks">
                        <option value="">Select a Snack</option>
                        <option value="Cup of Noodles">Cup of Noodles - $1.50</option>
                        <option value="Pop Tarts">Pop Tarts - $1.50</option>
                        <option value="Oreos">Oreos - $1.50</option>
                        <option value="Famous Amos">Famous Amos - $1.50</option>
                        <option value="Uncrustable">Uncrustable - $2</option>
                        <option value="Mac' N Cheese">Mac' N Cheese - $2</option>
                        <option value="Nature Valley Bar">Nature Valley Bar - $2</option>
                        <option value="Clif Bar">Clif Bar - $2</option>
                        <option value="Donuts">Donuts - $3</option>
                        <option value="Beef Jerky">Beef Jerky - $3</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="field">
            <label class="label">Candy</label>
            <div class="control">
                <div class="select">
                    <select id="candy" name="Candy">
                        <option value="">Select a Candy</option>
                        <option value="Kit Kat">Kit Kat - $2</option>
                        <option value="Twix">Twix - $2</option>
                        <option value="Snickers">Snickers - $2</option>
                        <option value="Reese's">Reese's - $2</option>
                        <option value="Sour Punch Straws">Sour Punch Straws - $2</option>
                        <option value="Skittles">Skittles - $2</option>
                        <option value="Sour Patch Kids">Sour Patch Kids - $2</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="field">
            <label class="label">Drink</label>
            <div class="control">
                <div class="select">
                    <select id="drink" name="Drink">
                        <option value="">Select a Drink</option>
                        <option value="Water">Water - $1</option>
                        <option value="Sprite">Sprite - $1.75</option>
                        <option value="Coke">Coke - $1.75</option>
                        <option value="Diet Coke">Diet Coke - $1.75</option>
                        <option value="Dr. Pepper">Dr. Pepper - $1.75</option>
                        <option value="Sunkist">Sunkist - $1.75</option>
                        <option value="Fruit Punch Gatorade">Fruit Punch Gatorade - $3</option>
                        <option value="Lemon Lime Gatorade">Lemon Lime Gatorade - $3</option>
                        <option value="Starbucks">Starbucks - $3</option>
                        <option value="Fairlife">Fairlife - $3</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="field">
            <label class="label">Total: <span id="total" class="price">$0.00</span></label>
        </div>

        <div class="field is-grouped">
            <div class="control">
                <button class="button is-primary" type="submit" id="submit-button">Submit Order</button>
            </div>
            <div class="control">
                <button class="button is-danger" type="reset">Cancel</button>
            </div>
        </div>
    </form>

    <div id="message" class="message is-hidden"></div>

    <script>
        function updateTotal() {
            const snack = document.getElementById("snack");
            const candy = document.getElementById("candy");
            const drink = document.getElementById("drink");

            const snackPrice = parseFloat(snack.selectedOptions[0]?.text.split("$")[1]) || 0;
            const candyPrice = parseFloat(candy.selectedOptions[0]?.text.split("$")[1]) || 0;
            const drinkPrice = parseFloat(drink.selectedOptions[0]?.text.split("$")[1]) || 0;

            const total = (snackPrice + candyPrice + drinkPrice).toFixed(2);
            document.getElementById("total").textContent = `$${total}`;
        }

        document.getElementById("snack").addEventListener("change", updateTotal);
        document.getElementById("candy").addEventListener("change", updateTotal);
        document.getElementById("drink").addEventListener("change", updateTotal);

        document.getElementById("form").addEventListener("submit", function (e) {
            e.preventDefault();
            const message = document.getElementById("message");
            const submitButton = document.getElementById("submit-button");
            message.textContent = "Submitting...";
            message.style.display = "block";
            submitButton.disabled = true;

            const formData = new FormData(this);
            const formDataString = new URLSearchParams(formData).toString();

            fetch("https://script.google.com/macros/s/AKfycbxkWz45FAha6OpNRRS4GKqe7tctGHaT49gENZdq9DmlpVDAH773riFT_0Xp9Ov7Z3Bq/exec", {
                method: "POST",
                body: formDataString,
                headers: {
                    "Content-Type": "application/x-www-form-urlencoded",
                },
            })
                .then((response) => {
                    if (!response.ok) throw new Error("Failed to submit the form.");
                    return response.text();
                })
                .then(() => {
                    message.textContent = "Order submitted successfully!";
                    message.style.backgroundColor = "green";
                    submitButton.disabled = false;
                    this.reset();
                    setTimeout(() => (message.style.display = "none"), 3000);
                })
                .catch((error) => {
                    console.error(error);
                    message.textContent = "An error occurred while submitting the form.";
                    message.style.backgroundColor = "red";
                    submitButton.disabled = false;
                });
        });
    </script>
</body>
</html>
